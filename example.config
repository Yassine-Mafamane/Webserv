
http {

    root                    /Users/ymafaman/Desktop/realWebserv/www.example.com;

    cgi_extention           .php;

    error_page              404 /error_pages/404.html; 

    server {

        listen 3333;
        server_names        www.example.com;

        location / {

            index           index.html;
            allowed_methods GET; # Allowing only GET requests.

        }

        location /not_found {

            return          404;

        }

        location /pictures {

            root            /Users/ymafaman/Desktop/Pictures;
            autoindex       on;

        }

    }

    server {

        listen              8888;
        server_names        www.example2.com;
        root                /Users/ymafaman/Desktop/realWebserv/www.example2.com;
        upload_dir          /uploads;

        location / {

            index           page1.html;

        }

        location /redirect_home {

            return          302 /;

        }

        location /videos/ {

            autoindex       on;

        }

        location = /videos/my_vid.mp4 {
            
            allowed_methods GET; # Excluding POST and DELETE methods. 

        }

    }

}




start poping 
first word must be http
call the function
if the openning char is not the next token error
start storing if it s a current context directive 
if a server directive is found 
call the function recursively and set the context as server
start stroing if it s a current context directive
if a location directive is found
call the function recursively and set the context as location
start stroing if it s a current context directive
the function ends if the closing char is found if not an error has to be thrown 
meaning if an other context keyword is found that is not beyond the scoop of the current context.